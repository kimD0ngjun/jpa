# 트랜잭션 이해를 위한 배경 공부

## 1. AOP

### 1) 정의

스프링 프레임워크에서 AOP(Aspect-Oriented Programming, 관점 지향 프로그래밍)는 프로그래밍의 한 패러다임으로, 애플리케이션의 공통 관심 사항(Cross-Cutting Concerns)을 모듈화하는 방법을 뜻한다.

애플리케이션 공통 사항이라 함은 로깅, 트랜잭션 관리, 보안 등과 같은, **애플리케이션의 모든 비즈니스 기능에 공통적으로 적용**되는 부분을 말한다. 

### 2) 프록시 패턴

스프링 프레임워크에서 AOP는 프록시 패턴을 활용해서 구현된다.

프록시 패턴은 대상 원본 객체를 대리하여 대신 처리하게 함으로써 로직의 흐름을 제어하는 행동 패턴이다. 객체지향 프로그래밍에서 클라이언트가 직접 대상 객체를 활용하지 않고 **대리인 객체**를 거쳐서 추가 로직을 수행하고 그제야 대상 객체에 접근하게 된다.

---

# 커스텀 객체 풀 아이디어

## 1. 계기

문자열은 리터럴을 통해 메모리 최적화를 한다. 이는, 동일 내용을 가진 문자열 객체를 굳이 새롭게 생성하지 않고 이전 값 주소를 똑같이 참조하게 하는 것이다. 어차피 객체 해시코드, 주소 등이 달라져도 내부 내용만 같으면 사용자는 쓰기 편할 테니

뭔가 이 아이디어를 JPA의 영속성 컨텍스트에서 활용할 수 있지 않을까 싶었다. 단일 트랜잭션 내에서는 영속성 컨텍스트의 캐싱을 통해 동일 엔티티를 계속 사용하게 된다. 하지만 다음 트랜잭션은 새로운 영속성 컨텍스트가 생겨나기 떄문에 새로운 객체를 쓰게 된다. 이 과정에서 이전의 트랜잭션 때 생성된 객체가 빠르게 지워지리라는 보장이 없다. 가비지 컬렉터를 개발자가 제어할 수 없으므로.

그래서 문자열 풀처럼 커스텀 객체 풀을 활용해 다음 트랜잭션에서도 이전 트랜잭션 때 조회한 엔티티 객체 주소를 다시 재사용할 수 있는 방법을 구현(까진 못해도 아이디어 구상)해볼까 생각 중.

## 2. How

일단 영속성 컨텍스트와 트랜잭션을 깊게 공부해야 하지 않을까